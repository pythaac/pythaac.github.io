---
layout: post
title: 인터넷이란
date: 2025-02-21 21:38 +0900
toc: true
comments: true
categories:
- 리포트
- CS기초
tags:
- 인터넷
- 네트워크
description: 인터넷 개요 및 네트워크 개요
---

## 1. OSI 7계층과 actor(스위치, 라우터, 게이트웨이, ISP)의 관계

### OSI 7계층 개요
OSI 7계층(Open Systems Interconnection)은 네트워크 통신을 계층별로 나누어 설명하는 모델입니다.

| 계층 | 이름 | 역할 | 관련 actor |
|---|---|---|---|
| 7 | **응용(Application) 계층** | 사용자와 네트워크 간 상호작용 (예: HTTP, FTP, DNS) | 웹 브라우저, 서버 |
| 6 | **표현(Presentation) 계층** | 데이터 형식 변환, 암호화, 압축 (예: SSL/TLS) | 웹 서버, SSL 암호화 장치 |
| 5 | **세션(Session) 계층** | 세션 연결 및 유지 (예: TCP 세션 관리) | 운영체제, 서버 프로세스 |
| 4 | **전송(Transport) 계층** | 데이터의 신뢰성 있는 전송 (TCP, UDP) | TCP/UDP 프로토콜 |
| 3 | **네트워크(Network) 계층** | IP 주소를 기반으로 라우팅 수행 | 라우터, 게이트웨이, ISP |
| 2 | **데이터 링크(Data Link) 계층** | MAC 주소를 기반으로 프레임 전달 | 스위치 |
| 1 | **물리(Physical) 계층** | 전기 신호, 광 신호 등 물리적 데이터 전송 | 네트워크 케이블, 무선(Wi-Fi) |

### **스위치(Switch)**
- **역할:** 동일 네트워크(LAN) 내에서 **MAC 주소를 기반으로 프레임 전달**
- **관련 계층:** 데이터 링크 계층(2계층)
- **동작 방식:** 
  - 클라이언트가 패킷을 보낼 때 **목적지 MAC 주소를 확인**하고 적절한 포트로 전송
  - ARP(주소 결정 프로토콜)를 사용해 IP-MAC 매핑 수행

### **라우터(Router)**
- **역할:** 서로 다른 네트워크 간에 **IP 주소를 기반으로 패킷을 전달**
- **관련 계층:** 네트워크 계층(3계층)
- **동작 방식:** 
  - IP 주소를 기반으로 라우팅 테이블을 조회하여 최적의 경로 선택
  - 목적지 네트워크가 같은 LAN 내에 있으면 바로 전달, 다른 네트워크면 **다른 라우터로 전달**

### **게이트웨이(Gateway)**
- **역할:** 서로 다른 네트워크 프로토콜을 사용하는 네트워크 간의 중개 역할
- **관련 계층:** 네트워크 계층(3계층) 이상
- **동작 방식:** 
  - 예를 들어, **내부망(사설 IP)과 외부망(공인 IP) 간의 변환 수행**
  - NAT(Network Address Translation)을 통해 내부 IP를 공인 IP로 변환

### **ISP(Internet Service Provider)**
- **역할:** 인터넷을 제공하는 네트워크 사업자로서 **라우팅을 수행**하고 IP 주소를 할당
- **관련 계층:** 네트워크 계층(3계층)
- **동작 방식:** 
  - 사용자가 인터넷에 접속할 때 ISP의 DNS 서버를 통해 도메인을 IP로 변환
  - **BGP(Border Gateway Protocol)**를 통해 다른 ISP 네트워크로 트래픽 전달

---

## 2. 물리 계층과 데이터 링크 계층의 프레임 정의 및 MAC 주소를 사용한 스위칭

### **물리 계층(1계층)**
- 데이터를 전기 신호 또는 광 신호로 변환하여 전송
- 네트워크 케이블(UTP, 광섬유), 무선(Wi-Fi) 등이 포함됨

### **데이터 링크 계층(2계층)**
- **프레임(Frame) 단위로 데이터 전송**
- **MAC 주소(Media Access Control Address) 사용**
- **스위치(Switch)**가 MAC 주소를 기반으로 프레임을 전달

### **MAC 주소 기반 스위칭 동작 과정**
1. 클라이언트가 서버로 데이터를 전송할 때 **목적지 MAC 주소**를 포함한 이더넷 프레임 생성
2. 스위치가 해당 MAC 주소를 보고 올바른 포트로 전달 (MAC 주소 테이블 활용)
3. 목적지 장비(서버)가 프레임을 수신하여 상위 계층으로 전달

---

## 3. IP 주소 정의: 서브넷 마스크, CIDR, 클래스, 공인/사설 IP

### **IP 주소란?**
- 네트워크에서 각 장치를 식별하는 **논리적 주소**
- IPv4(32비트)와 IPv6(128비트)로 구분됨

### **서브넷 마스크와 CIDR**
- **서브넷 마스크**: 네트워크 부분과 호스트 부분을 구분하는 역할 (예: `255.255.255.0`)
- **CIDR(Classless Inter-Domain Routing) 표기법**: IP 주소 뒤에 `/`와 비트 수를 붙여 표현 (예: `192.168.1.0/24`)

### **공인(Public) vs 사설(Private) IP**
- **공인 IP**: 인터넷에서 사용되는 고유한 주소 (ISP에서 할당)
- **사설 IP**: 내부 네트워크에서만 사용되는 주소 (NAT를 통해 공인 IP로 변환)
  - 예) `192.168.0.0/16`, `172.16.0.0/12`, `10.0.0.0/8`

---

## 4. IP 주소 및 MAC을 이용한 actor들의 라우팅 과정

1. 클라이언트가 서버로 데이터를 전송하면 먼저 **ARP**를 사용해 MAC 주소를 알아냄
2. 같은 네트워크에 있으면 **스위치를 통해 MAC 주소를 기반으로 전달**
3. 다른 네트워크에 있으면 **라우터로 전달**
4. 라우터는 목적지 IP 주소를 보고 **라우팅 테이블을 조회하여 다음 홉(Next Hop) 결정**
5. 목적지가 다른 ISP에 있다면 **BGP를 통해 ISP 네트워크로 전달**
6. 최종적으로 목적지 서버가 패킷을 수신

---

## 네트워크 라우팅 시나리오 예시

### 1. 같은 LAN에 있는 서버/클라이언트의 라우팅 과정

#### 시나리오 개요
- 클라이언트(`192.168.1.10`)가 같은 네트워크(LAN)에 있는 서버(`192.168.1.20`)로 데이터를 전송하는 과정
- **스위치(Switch)**를 통해 MAC 주소 기반으로 프레임 전달

#### 과정 설명
1. 클라이언트(`192.168.1.10`)가 서버(`192.168.1.20`)로 데이터를 전송하려고 함.
2. 클라이언트는 목적지 IP(`192.168.1.20`)에 대한 **MAC 주소를 알지 못하면** ARP(Address Resolution Protocol) 요청을 브로드캐스트(`FF:FF:FF:FF:FF:FF`)로 전송.
3. 서버(`192.168.1.20`)가 자신의 MAC 주소를 포함한 ARP 응답을 클라이언트에게 전송.
4. 클라이언트는 받은 MAC 주소를 이용하여 **이더넷 프레임**을 생성하고 데이터를 전송.
5. **스위치(Switch)**는 클라이언트가 보낸 프레임을 받고, 목적지 MAC 주소를 기반으로 올바른 포트로 전달.
6. 서버(`192.168.1.20`)가 패킷을 수신하고 응답을 보냄.

#### 정리
- **데이터 링크 계층(2계층)**에서 MAC 주소를 기반으로 통신.
- 라우터를 거치지 않고, 스위치가 프레임을 전달.

---

### 2. 다른 LAN에 있는 서버/클라이언트의 라우팅 과정

#### 시나리오 개요
- 클라이언트(`192.168.1.10/24`)가 다른 네트워크(LAN)에 있는 서버(`192.168.2.20/24`)로 데이터를 전송하는 과정
- **라우터(Router)**가 패킷을 라우팅하여 전달

#### 과정 설명
1. 클라이언트가 목적지 IP(`192.168.2.20`)를 확인한 후 **서브넷 마스크(`255.255.255.0`)를 적용**하여 같은 네트워크인지 판단.
2. `192.168.1.10/24`와 `192.168.2.20/24`는 다른 네트워크이므로, **패킷을 기본 게이트웨이(`192.168.1.1`)로 전송**해야 함.
3. 클라이언트는 ARP를 사용하여 **라우터의 MAC 주소**를 알아냄.
4. 클라이언트는 **목적지 MAC 주소를 라우터의 MAC 주소로 설정**하여 이더넷 프레임을 생성하고 전송.
5. 라우터는 **네트워크 계층(3계층)**에서 패킷의 목적지 IP(`192.168.2.20`)를 확인하고 라우팅 테이블을 조회.
6. 라우팅 테이블에 `192.168.2.0/24` 네트워크가 존재하므로, 해당 네트워크로 패킷을 전달.
7. 라우터는 ARP를 사용하여 서버(`192.168.2.20`)의 MAC 주소를 알아내고, 새로운 이더넷 프레임을 생성하여 서버로 전송.
8. 서버(`192.168.2.20`)가 패킷을 수신하고 응답을 보냄.

#### 정리
- **네트워크 계층(3계층)**에서 라우터가 목적지 IP를 기반으로 패킷을 전달.
- 데이터 링크 계층에서는 여전히 MAC 주소를 사용하여 전달.

---

### 3. 다른 ISP에 있는 서버/클라이언트의 라우팅 과정

#### 시나리오 개요
- 클라이언트(`192.168.1.10`)가 `Google.com` 서버(`142.250.190.78`)로 데이터를 전송하는 과정
- **ISP 라우터 및 BGP(Border Gateway Protocol)를 통한 글로벌 라우팅 수행**

#### 과정 설명

**(1) DNS를 통한 IP 주소 조회**
1. 클라이언트가 `Google.com`에 접속하려고 함.
2. **DNS 요청**을 통해 `Google.com`의 IP(`142.250.190.78`)를 조회.

**(2) 패킷 전달 과정**
3. 클라이언트는 IP 주소(`142.250.190.78`)를 확인한 후, 서브넷 마스크를 적용하여 **다른 네트워크임을 인식**.
4. 기본 게이트웨이(`192.168.1.1`)로 패킷을 전송하기 위해 **ARP를 사용하여 라우터의 MAC 주소**를 조회.
5. 클라이언트는 **이더넷 프레임의 목적지 MAC 주소를 라우터의 MAC 주소로 설정**하고 패킷을 전송.
6. 라우터는 패킷의 목적지 IP(`142.250.190.78`)를 확인하고, **라우팅 테이블을 조회하여 ISP 게이트웨이로 전송**.
7. ISP 게이트웨이는 **BGP(Border Gateway Protocol)**를 사용하여 글로벌 라우팅 테이블을 조회.
8. 최적의 경로를 찾고, **상위 ISP 또는 백본 네트워크로 패킷을 전달**.
9. 여러 개의 ISP 네트워크를 거쳐 최종적으로 Google의 데이터센터에 도착.
10. Google 서버(`142.250.190.78`)가 요청을 처리한 후 응답을 반환.

#### 정리
- **라우터와 ISP 라우팅을 거쳐 글로벌 인터넷으로 패킷이 전달됨**.
- **BGP 프로토콜을 활용하여 최적의 경로를 찾아 패킷을 전달**.
- **IP 주소를 기반으로 네트워크 계층에서 라우팅이 이루어지며, 데이터 링크 계층에서는 여전히 MAC 주소를 사용**.

---

### 4. 전체 흐름 요약

1. **같은 네트워크(LAN) 내 통신**: 스위치가 MAC 주소를 기반으로 프레임 전달.
2. **다른 LAN 간 통신**: 라우터가 목적지 IP를 확인하고 적절한 네트워크로 패킷을 전달.
3. **인터넷을 통한 글로벌 통신**: ISP 게이트웨이 및 BGP를 활용하여 목적지 네트워크까지 패킷을 전송.
